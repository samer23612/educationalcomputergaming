<?php
include_once('connToDB.php');
$conn = doDB();
$count = 0; //used for counting records searched
$searchDB = $_SESSION['searchDB'];

$postOp1 = $_POST['op1'];
$postOp2 = $_POST['op2'];
$postOp3 = $_POST['op3'];
$postOp4 = $_POST['op4'];

$searchTitle = $_POST['title'];
$searchPub = $_POST['publisher'];
$searchSub = $_POST['subject'];
$searchMeth = $_POST['learnMeth'];
$searchPlat = $_POST['platform'];

$searchAll = $_POST['All'];

$minAge = $_POST['minAgeLevel'];
$maxAge = $_POST['maxAgeLevel'];
$minGrade = $_POST['minGradeLevel'];
$maxGrade = $_POST['maxGradeLevel'];
//print $searchDB; //prints Selected Search Criteria

$resultsSearch = mysqli_query($conn, $searchDB);
///////
		
			echo "<table style='border: 1px solid #000000; margin:0 auto; width: 780px; background-color: #fbfafd; border-collapse: collapse; padding:8px;'>
				<tr style='border: 1px solid #000000; background-color: #fbfafd; border-collapse: collapse; padding:8px;'>
					<th style='border: 1px solid #000000; background-color: #fbfafd; border-collapse: collapse; padding:8px; color:red;'>Delete</th>
					<th style='border: 1px solid #000000; background-color: #fbfafd; border-collapse: collapse; padding:8px; color:blue;'>Edit</th>
					<th style='border: 1px solid #000000; background-color: #fbfafd; border-collapse: collapse; padding:8px;'>ID</th>
					<th style='border: 1px solid #000000; background-color: #fbfafd; border-collapse: collapse; padding:8px;'>Title</th>
					<th style='border: 1px solid #000000; background-color: #fbfafd; border-collapse: collapse; padding:8px;'>Publisher</th>
					<th style='border: 1px solid #000000; background-color: #fbfafd; border-collapse: collapse; padding:8px;'>Description</th>
					<th style='border: 1px solid #000000; background-color: #fbfafd; border-collapse: collapse; padding:8px;'>Website</th>
					<th style='border: 1px solid #000000; background-color: #fbfafd; border-collapse: collapse; padding:8px;'>Learning Area</th>
					<th style='border: 1px solid #000000; background-color: #fbfafd; border-collapse: collapse; padding:8px;'>Learning Sub Areas</th>
					<th style='border: 1px solid #000000; background-color: #fbfafd; border-collapse: collapse; padding:8px;'>Age Level</th>
					<th style='border: 1px solid #000000; background-color: #fbfafd; border-collapse: collapse; padding:8px;'>Grade Level</th>
					<th style='border: 1px solid #000000; background-color: #fbfafd; border-collapse: collapse; padding:8px;'>Learning Method</th>
					<th style='border: 1px solid #000000; background-color: #fbfafd; border-collapse: collapse; padding:8px;'>Platform</th>
					<th style='border: 1px solid #000000; background-color: #fbfafd; border-collapse: collapse; padding:8px;'>Learning Notes</th>
					
				</tr>";
				
				// The possible values for this parameter are the constants MYSQLI_ASSOC, MYSQLI_NUM, or MYSQLI_BOTH.
				while($database = mysqli_fetch_array($resultsSearch, MYSQLI_ASSOC))
				{
				$count++;
					$id=$database['id']; 				
					$title=$database['title']; 
					$publisher=$database['publisher'];
					$description=$database['description'];
					$website=$database['website'];
					$learningArea=$database['learningArea'];
					$subArea=$database['subArea'];
					$minAgeLevel=$database['minAgeLevel'];
					$maxAgeLevel=$database['maxAgeLevel'];
					$minGradeLevel=$database['minGradeLevel'];
					$maxGradeLevel=$database['maxGradeLevel'];
					$method=$database['method'];
					$platform=$database['platform'];					
					$learningNotes=$database['learningNotes'];
					
					echo "<tr style='border: 1px solid #000000; background-color: #fbfafd; border-collapse: collapse; padding:8px;'>";
					echo "<td style='border: 1px solid #000000; background-color: #fbfafd; border-collapse: collapse; padding:8px;'><a style='color:red;' title='Delete' href='deleteGames.php?id=" . $id . "'>Delete</a></td>";
					echo "<td style='border: 1px solid #000000; background-color: #fbfafd; border-collapse: collapse; padding:8px;'><a style='color:blue;' title='Edit' href='editGames.php?id=" . $id . "'>Edit</a></td>";
					echo "<td style='border: 1px solid #000000; background-color: #fbfafd; border-collapse: collapse; padding:8px;'>".$id."</td>";
					echo "<td style='border: 1px solid #000000; background-color: #fbfafd; border-collapse: collapse; padding:8px;'>".$title."</td>";
					echo "<td style='border: 1px solid #000000; background-color: #fbfafd; border-collapse: collapse; padding:8px;'>".$publisher."</td>";
					echo "<td style='border: 1px solid #000000; background-color: #fbfafd; border-collapse: collapse; padding:8px;'>".$description."</td>";
					//echo "<td style='border: 1px solid #000000; background-color: #fbfafd; border-collapse: collapse; padding:8px;'>".$website."</td>";
					echo "<td style='border: 1px solid #000000; background-color: #fbfafd; border-collapse: collapse; padding:8px;'> <a href = '//".$website."' title = '".$website."' target = '_blank'><u>".$website."</u></a> </td>";
					echo "<td style='border: 1px solid #000000; background-color: #fbfafd; border-collapse: collapse; padding:8px;'>".$learningArea."</td>";
					echo "<td style='border: 1px solid #000000; background-color: #fbfafd; border-collapse: collapse; padding:8px;'>".$subArea."</td>";
					echo "<td style='border: 1px solid #000000; background-color: #fbfafd; border-collapse: collapse; padding:8px;'>".$minAgeLevel." - ".$maxAgeLevel."</td>";
					echo "<td style='border: 1px solid #000000; background-color: #fbfafd; border-collapse: collapse; padding:8px;'>".$minGradeLevel." - ".$maxGradeLevel."</td>";					
					echo "<td style='border: 1px solid #000000; background-color: #fbfafd; border-collapse: collapse; padding:8px;'>".$method."</td>";
					echo "<td style='border: 1px solid #000000; background-color: #fbfafd; border-collapse: collapse; padding:8px;'>".$platform."</td>";
					echo "<td style='border: 1px solid #000000; background-color: #fbfafd; border-collapse: collapse; padding:8px;'>".$learningNotes."</td>";


					echo "</tr>";
				}	
			echo "</table>";	
//////////////////  
				echo "<br>Number of Games found: " . $count . "<br>";
?>
</html>